{% extends 'index.html' %}

{% block contenido %}
<header>
    <h2>Panel de Control</h2>
    <div class="user-profile">
        <span>Admin</span>
        <div class="avatar"></div>
    </div>
</header>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-title">Total Libros</div>
        <div class="stat-value">{{ total_libros }}</div>
    </div>
    <div class="stat-card" style="border-color: rgba(0, 243, 255, 0.3);">
        <div class="stat-title">Préstamos Activos</div>
        <div class="stat-value" style="color: var(--neon-blue)">{{ prestamos_activos }}</div>
    </div>
    <div class="stat-card" style="border-color: rgba(255, 0, 85, 0.3);">
        <div class="stat-title">Multas Pendientes</div>
        <div class="stat-value" style="color: var(--neon-red)">${{ multas_pendientes }}</div>
    </div>
    <div class="stat-card">
        <div class="stat-title">Usuarios Registrados</div>
        <div class="stat-value">{{ usuarios_registrados }}</div>
    </div>
</div>

<section class="recent-section">
    <div class="section-header">
        <h3>Libros Recientes</h3>
        <a href="#" class="btn-add">+ Nuevo Libro</a>
    </div>
    <table>
        <thead>
            <tr>
                <th>Título</th>
                <th>Autor</th>
                <th>Categoría</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            {% for libro in libros_recientes %}
            <tr>
                <td>{{ libro.titulo }}</td>
                <td>{{ libro.autor.nombre }} {{ libro.autor.apellido }}</td>
                <td>
                    {% for cat in libro.categorias.all %}
                    {{ cat.nombre }}{% if not forloop.last %}, {% endif %}
                    {% empty %}
                    Sin categoría
                    {% endfor %}
                </td>
                <td>
                    {% if libro.esta_disponible %}
                    <span class="status available">Disponible</span>
                    {% else %}
                    <span class="status borrowed">Agotado</span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" style="text-align:center;">No hay libros registrados aún.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>
{% endblock %}